<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detail Pendaftaran Wisuda - Polinela</title>
  <link rel="shortcut icon" href="/images/logopolinela.png" type="image/png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: #F5F7FA;
    }
    
    .navbar-custom {
      background: #0047AB;
      padding: 1rem 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .navbar-brand {
      color: white !important;
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .navbar-custom .nav-link {
      color: white !important;
      font-weight: 500;
      margin: 0 1rem;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0047AB;
      font-weight: 600;
    }
    
    .main-content {
      padding: 2rem 0;
      min-height: calc(100vh - 80px);
    }
    
    .page-title {
      font-size: 2rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 0.5rem;
    }
    
    .page-subtitle {
      color: #666;
      margin-bottom: 2rem;
    }
    
    .detail-card {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 2px 15px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }
    
    .detail-card h3 {
      font-size: 1.3rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #E5E7EB;
    }
    
    .status-badge-large {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
    }
    
    .status-badge-large.verified {
      background: #D1FAE5;
      color: #065F46;
    }
    
    .status-badge-large.pending {
      background: #FEF3C7;
      color: #92400E;
    }
    
    .status-badge-large.rejected {
      background: #FEE2E2;
      color: #991B1B;
    }
    
    .info-row {
      display: flex;
      padding: 1rem 0;
      border-bottom: 1px solid #F3F4F6;
    }
    
    .info-row:last-child {
      border-bottom: none;
    }
    
    .info-label {
      width: 250px;
      color: #666;
      font-weight: 500;
    }
    
    .info-value {
      color: #333;
      font-weight: 600;
      flex: 1;
    }
    
    .document-list {
      display: grid;
      gap: 1rem;
    }
    
    .document-item {
      background: #F9FAFB;
      border: 2px solid #E5E7EB;
      border-radius: 12px;
      padding: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.3s;
    }
    
    .document-item:hover {
      border-color: #0047AB;
      background: #F0F9FF;
    }
    
    .document-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .document-icon {
      width: 50px;
      height: 50px;
      background: #0047AB;
      color: white;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }
    
    .document-name {
      font-weight: 600;
      color: #333;
      margin-bottom: 0.25rem;
    }
    
    .document-file {
      font-size: 0.85rem;
      color: #666;
    }
    
    .btn-view {
      background: #0047AB;
      color: white;
      border: none;
      padding: 0.5rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .btn-view:hover {
      background: #003380;
      color: white;
    }
    
    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    .btn-action {
      flex: 1;
      padding: 1rem;
      border-radius: 10px;
      font-weight: 600;
      font-size: 1rem;
      border: none;
      transition: all 0.3s;
    }
    
    .btn-back {
      background: white;
      color: #0047AB;
      border: 2px solid #0047AB;
    }
    
    .btn-back:hover {
      background: #F0F9FF;
    }
    
    .btn-print {
      background: #0047AB;
      color: white;
    }
    
    .btn-print:hover {
      background: #003380;
      transform: translateY(-2px);
    }
    
    .admin-note {
      background: #FFF3CD;
      border-left: 4px solid #F59E0B;
      padding: 1.5rem;
      border-radius: 8px;
      margin-top: 1.5rem;
    }
    
    .admin-note-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #92400E;
      font-weight: 600;
      margin-bottom: 0.75rem;
      font-size: 1rem;
    }
    
    .admin-note-text {
      color: #92400E;
      margin: 0;
      line-height: 1.6;
    }
        .nav-avatar-img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      border: 2px solid 0047AB;
    }

      .nav-avatar-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    @media (max-width: 768px) {
      .info-row {
        flex-direction: column;
      }
      
      .info-label {
        width: 100%;
        margin-bottom: 0.5rem;
      }
      
      .document-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .action-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container">
    <a class="navbar-brand" href="/mahasiswa/dashboard">
      <i class="fas fa-graduation-cap me-2"></i>Dashboard Mahasiswa
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon" style="filter: brightness(0) invert(1);"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
          <a class="nav-link" href="/mahasiswa/dashboard">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/auth/logout">Logout</a>
        </li>
        <div class="nav-avatar-img">
            <% if (mahasiswa.foto_profil) { %>
                <img src="/uploads/profile/<%= mahasiswa.foto_profil %>" alt="Foto Profil">
            <% } else { %>
                <img src="https://ui-avatars.com/api/?name=<%= mahasiswa.nama %>&size=120&background=0047AB&color=fff&bold=true" alt="Avatar">
            <% } %>
        </div>
      </ul>
      </ul>
    </div>
  </div>
</nav>

<!-- MAIN CONTENT -->
<div class="main-content">
  <div class="container">
    <h1 class="page-title">Detail Pendaftaran Wisuda</h1>
    <p class="page-subtitle">Informasi lengkap mengenai pendaftaran wisuda Anda.</p>
    
    <div class="row">
      <div class="col-lg-8">
        <!-- Info Pendaftaran -->
        <div class="detail-card">
          <h3><i class="fas fa-info-circle me-2"></i>Informasi Pendaftaran</h3>
          
          <!-- Status Badge -->
          <% if (pendaftaran.status === 'Diverifikasi') { %>
            <div class="status-badge-large verified">
              <i class="fas fa-check-circle fa-lg"></i>
              <span>Pendaftaran Terverifikasi</span>
            </div>
          <% } else if (pendaftaran.status === 'Diajukan') { %>
            <div class="status-badge-large pending">
              <i class="fas fa-clock fa-lg"></i>
              <span>Menunggu Verifikasi</span>
            </div>
          <% } else if (pendaftaran.status === 'Ditolak') { %>
            <div class="status-badge-large rejected">
              <i class="fas fa-times-circle fa-lg"></i>
              <span>Pendaftaran Ditolak</span>
            </div>
          <% } %>
          
          <div class="info-row">
            <div class="info-label">Nama Lengkap</div>
            <div class="info-value"><%= mahasiswa.nama %></div>
          </div>
          
          <div class="info-row">
            <div class="info-label">NPM</div>
            <div class="info-value"><%= mahasiswa.nim %></div>
          </div>
          
          <div class="info-row">
            <div class="info-label">Program Studi</div>
            <div class="info-value"><%= mahasiswa.prodi %></div>
          </div>
          
          <div class="info-row">
            <div class="info-label">Jurusan</div>
            <div class="info-value"><%= mahasiswa.jurusan %></div>
          </div>
          
          <div class="info-row">
            <div class="info-label">Tanggal Pendaftaran</div>
            <div class="info-value">
              <%= new Date(pendaftaran.tanggal_daftar).toLocaleDateString('id-ID', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              }) %>
            </div>
          </div>
          
          <div class="info-row">
            <div class="info-label">Status Pendaftaran</div>
            <div class="info-value">
              <span style="color: 
                <%= pendaftaran.status === 'Diverifikasi' ? '#065F46' : 
                    pendaftaran.status === 'Ditolak' ? '#991B1B' : '#92400E' %>;">
                <%= pendaftaran.status %>
              </span>
            </div>
          </div>
          
          <% if (pendaftaran.verified_at) { %>
            <div class="info-row">
              <div class="info-label">Tanggal Verifikasi</div>
              <div class="info-value">
                <%= new Date(pendaftaran.verified_at).toLocaleDateString('id-ID', { 
                  weekday: 'long', 
                  year: 'numeric', 
                  month: 'long', 
                  day: 'numeric' 
                }) %>
              </div>
            </div>
          <% } %>
          
          <% if (pendaftaran.catatan && pendaftaran.status === 'Ditolak') { %>
            <div class="admin-note">
              <div class="admin-note-title">
                <i class="fas fa-exclamation-circle"></i>
                <span>Catatan dari Admin:</span>
              </div>
              <p class="admin-note-text"><%= pendaftaran.catatan %></p>
            </div>
          <% } %>
        </div>
        
        <!-- Dokumen Terupload -->
        <div class="detail-card">
          <h3><i class="fas fa-file-upload me-2"></i>Dokumen Terupload</h3>
          
          <div class="document-list">
            <% if (dokumen && dokumen.length > 0) { %>
              <% dokumen.forEach(doc => { %>
                <div class="document-item">
                  <div class="document-info">
                    <div class="document-icon">
                      <i class="fas fa-file-pdf"></i>
                    </div>
                    <div>
                      <div class="document-name"><%= doc.jenis_dokumen.replace(/_/g, ' ') %></div>
                      <div class="document-file"><%= doc.nama_file %></div>
                    </div>
                  </div>
                  <a href="/uploads/<%= doc.path_file %>" target="_blank" class="btn-view">
                    <i class="fas fa-eye me-2"></i>Lihat
                  </a>
                </div>
              <% }); %>
            <% } else { %>
              <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Belum ada dokumen yang diupload.
              </div>
            <% } %>
          </div>
        </div>
      </div>
      
      <!-- Sidebar Actions -->
      <div class="col-lg-4">
        <div class="detail-card">
          <h3><i class="fas fa-cog me-2"></i>Aksi</h3>
          
          <% if (pendaftaran.status === 'Diverifikasi') { %>
            <button class="btn-action btn-print w-100 mb-3" onclick="window.open('/mahasiswa/cetak-bukti', '_blank')">
              <i class="fas fa-print me-2"></i>Cetak Bukti Pendaftaran
            </button>
          <% } else if (pendaftaran.status === 'Ditolak') { %>
            <button class="btn-action btn-print w-100" onclick="window.location.href='/mahasiswa/upload-berkas'">
              <i class="fas fa-redo me-2"></i>Unggah Ulang Berkas
            </button>
          <% } else { %>
            <div class="alert alert-info">
              <i class="fas fa-info-circle me-2"></i>
              <strong>Menunggu Verifikasi</strong><br>
              <small>Dokumen Anda sedang dalam proses verifikasi oleh admin.</small>
            </div>
          <% } %>
          
          <button class="btn-action btn-back w-100 mt-3" onclick="window.location.href='/mahasiswa/dashboard'">
            <i class="fas fa-arrow-left me-2"></i>Kembali ke Dashboard
          </button>
        </div>
        
        <!-- Info Box -->
        <div class="detail-card mt-3" style="background: #F0F9FF; border: 2px solid #0047AB;">
          <h5 style="color: #0047AB; margin-bottom: 1rem;">
            <i class="fas fa-info-circle me-2"></i>Informasi Penting
          </h5>
          <ul style="margin: 0; padding-left: 1.5rem; color: #333; font-size: 0.9rem; line-height: 1.8;">
            <li>Pastikan semua dokumen yang diupload sudah benar</li>
            <li>Verifikasi biasanya memakan waktu 3-5 hari kerja</li>
            <li>Jika ditolak, segera perbaiki dan upload ulang</li>
            <li>Cetak bukti setelah status terverifikasi</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>